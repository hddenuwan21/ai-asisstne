<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WHDR AI - Glass Menu</title>
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: rgba(110, 72, 170, 0.8);
            --secondary: rgba(84, 164, 201, 0.8);
            --glass: rgba(255, 255, 255, 0.15);
            --glass-border: rgba(255, 255, 255, 0.25);
            --glass-highlight: rgba(255, 255, 255, 0.3);
            --text: rgba(255, 255, 255, 0.9);
            --text-light: rgba(255, 255, 255, 0.7);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            --backdrop-blur: blur(10px);
            --transition: all 0.3s ease-out;
        }

        body {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--text);


        }

        /* Header Styles */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: var(--glass);
            backdrop-filter: var(--backdrop-blur);
            -webkit-backdrop-filter: var(--backdrop-blur);
            border-bottom: 1px solid var(--glass-border);
            color: white;
            padding: 15px;
            box-shadow: var(--shadow);
            z-index: 1000;
            transition: var(--transition);
            border-radius: 10px;
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .avatar-container {
            position: relative;
            width: 80px;
            height: 80px;
        }

        .avatar {
            width: 100%;
            height: 100%;
            border-radius: 50%;

            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(110, 72, 170, 0.4);
            position: relative;
        }

        .avatar img {
            width: 80%;
            height: 80%;
            object-fit: cover;
        }

        .avatar-pulse {
            position: absolute;
            top: 1px;
            left: 1%;
            right: 1px;
            bottom: 1px;
            border: 3px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            animation: pulse 3s infinite;
        }

        .avatar-pulse:nth-child(2) {
            animation-delay: 0.5s;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 1;
            }

            100% {
                transform: scale(1.2);
                opacity: 0;
            }
        }

        .logo-text {
            font-size: 20px;
            font-weight: 700;
            margin-left: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        /* Loading Animation Avatar */
        .loading-animation {
            display: inline-block;
            position: relative;
            width: 24px;
            height: 24px;
        }

        .loading-animation div {
            position: absolute;
            width: 6px;
            height: 6px;
            background: white;
            border-radius: 50%;
            animation: loading 1.2s linear infinite;
        }

        .loading-animation div:nth-child(1) {
            animation-delay: 0s;
            top: 12px;
            left: 0;
        }

        .loading-animation div:nth-child(2) {
            animation-delay: -0.4s;
            top: 4px;
            left: 4px;
        }

        .loading-animation div:nth-child(3) {
            animation-delay: -0.8s;
            top: 0;
            left: 12px;
        }

        .loading-animation div:nth-child(4) {
            animation-delay: -0.4s;
            top: 4px;
            right: 4px;
        }

        .loading-animation div:nth-child(5) {
            animation-delay: -0.8s;
            top: 12px;
            right: 0;
        }

        .loading-animation div:nth-child(6) {
            animation-delay: -1.2s;
            bottom: 4px;
            right: 4px;
        }

        .loading-animation div:nth-child(7) {
            animation-delay: -1.6s;
            bottom: 0;
            left: 12px;
        }

        .loading-animation div:nth-child(8) {
            animation-delay: -1.2s;
            bottom: 4px;
            left: 4px;
        }

        @keyframes loading {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.3;
            }
        }

        /* Mobile Menu Button */
        .menu-toggle {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            color: white;
            font-size: 20px;
            cursor: pointer;
            display: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            backdrop-filter: var(--backdrop-blur);
            -webkit-backdrop-filter: var(--backdrop-blur);
            transition: var(--transition);
        }

        .menu-toggle:hover {
            background: var(--glass-highlight);
        }


        nav {
            transition: var(--transition);


        }

        nav ul {
            display: flex;
            list-style: none;
            margin-top: 10px;
        }

        nav li {
            flex: 1;
            text-align: center;
            padding: 20px;
        }

        nav a {

            color: var(--text);
            text-decoration: none;
            font-weight: 500;
            padding: 10px 0;
            display: block;
            border-radius: 8px;
            transition: var(--transition);
            background: var(--glass);
            margin: 0 5px;
            border: 1px solid var(--glass-border);
        }

        nav a:hover,
        nav a.active {
            background: var(--glass-highlight);
            transform: translateY(-5px);
        }

        /* Mobile Styles */
        @media (max-width: 768px) {
            .logo-container {
                padding: 0 10px;
            }

            .menu-toggle {
                display: flex;
                align-items: center;
                justify-content: center;
            }

            nav {
                max-height: 0;
                overflow: hidden;
            }

            nav.active {
                max-height: 500px;
            }

            nav ul {
                flex-direction: column;
                margin-top: 10px;
            }

            nav li {
                margin: 5px 0;
            }

            nav a {
                margin: 0;
            }
        }

        /* Content Styles */
        .content {
            padding: 20px;
            height: 2000px;
        }

        h1 {
            color: white;
            margin-bottom: 20px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }









        body {

            min-height: 110vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow: hidden;
        }

        .chat-container {
            width: 450px;
            height: 700px;

            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.3);
            position: relative;
            background: var(--glass);
            backdrop-filter: var(--backdrop-blur);
            -webkit-backdrop-filter: var(--backdrop-blur);

            z-index: 1;
        }

        .chat-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg,
                    rgba(102, 126, 234, 0.1) 0%,
                    rgba(85, 0, 170, 0.1) 50%,
                    rgba(2, 17, 83, 0.1) 100%);
            transform: rotate(45deg);
            z-index: -1;
            animation: liquidFlow 20s infinite linear;
            background-size: 200% 200%;
        }

        @keyframes liquidFlow {
            0% {
                transform: rotate(45deg) translate(-10%, -10%);
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                transform: rotate(45deg) translate(10%, 10%);
                background-position: 0% 50%;
            }
        }

        /* Rest of your existing CSS remains the same */
        .chat-header {

            color: rgb(255, 255, 255);
            padding: 1.2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            z-index: 2;
            background: rgba(158, 0, 206, 0.1);


        }

        .header-content {
            display: flex;
            align-items: center;
            gap: 10px;
        }




        .chat-body {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
            background: var(--glass);
        }


        .message {
            max-width: 85%;
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 0.95rem;
            line-height: 1.5;
            position: relative;
            transition: transform 0.2s, opacity 0.2s;
        }

        .message.user-message {
            transform-origin: right bottom;
        }

        .message.bot-message {
            transform-origin: left bottom;
        }

        .message.appearing {
            animation: messageAppear 0.3s ease-out forwards;
        }

        @keyframes messageAppear {
            from {
                transform: scale(0.8);
                opacity: 0;
            }

            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .user-message {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            align-self: flex-end;
            border-radius: 18px 18px 0 18px;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
        }

        .bot-message {
            background: rgba(240, 242, 245, 0.9);
            color: #1f1f1f;
            align-self: flex-start;
            border-radius: 18px 18px 18px 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .typing-indicator {
            display: inline-block;
            padding: 10px 15px;
        }

        .typing-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #999;
            margin-right: 4px;
            animation: typingAnimation 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) {
            animation-delay: 0s;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typingAnimation {

            0%,
            60%,
            100% {
                transform: translateY(0);
                opacity: 0.6;
            }

            30% {
                transform: translateY(-5px);
                opacity: 1;
            }
        }

        .input-container {
            padding: 15px 20px;
            border-top: 1px solid rgba(221, 221, 221, 0.5);
            display: flex;
            gap: 10px;
            background: rgba(255, 255, 255, 0.5);
            position: relative;
        }

        #user-input {
            flex: 1;
            padding: 12px 18px;
            border: 1px solid rgba(221, 221, 221, 0.7);
            border-radius: 25px;
            outline: none;
            transition: all 0.3s;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(5px);
            font-size: 0.95rem;
        }

        #user-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.2);
        }

        #send-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 0;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 10px rgba(102, 126, 234, 0.3);
        }

        #send-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 3px 12px rgba(102, 126, 234, 0.4);
        }

        #send-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .file-upload-btn {
            background: none;
            border: none;
            color: #667eea;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: all 0.2s;
        }

        .file-upload-btn:hover {
            background: rgba(102, 126, 234, 0.1);
        }

        #file-input {
            display: none;
        }

        .message-image {
            max-width: 100%;
            border-radius: 10px;
            margin-top: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .message-code {
            background: #f5f5f5;
            border-radius: 6px;
            padding: 12px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.85rem;
            overflow-x: auto;
            margin-top: 8px;
            border-left: 3px solid #667eea;
        }

        .file-preview {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(102, 126, 234, 0.1);
            padding: 8px 12px;
            border-radius: 12px;
            margin-top: 8px;
            font-size: 0.85rem;
        }

        .file-icon {
            font-size: 1.2rem;
        }

        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -60px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.8rem;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
            margin-top: 10px;
        }

        .action-btn {
            background: rgba(102, 126, 234, 0.1);
            border: none;
            border-radius: 15px;
            padding: 5px 10px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .action-btn:hover {
            background: rgba(102, 126, 234, 0.2);
        }
    </style>
</head>

<body>
    <header>
        <div class="logo-container">
            <div class="avatar-container">
                <div class="avatar-pulse"></div>
                <div class="avatar-pulse"></div>
                <div class="avatar">
                    <img src="!.png" alt="AI Girl Avatar">
                </div>
            </div>
            <div class="logo-text">WHDR AI</div>
            <button class="menu-toggle">â˜°</button>
        </div>

        <nav id="main-nav">
            <ul>
                <li><a href="ChatBot.html">AI Chat</a></li>
                <li><a href="aibot.html" class="active">Image Generate</a></li>
                <li><a href="#">Game</a></li>
            </ul>
        </nav>

    </header>
    <div class="chat-container">
        <div class="chat-header">
            <div class="header-content">

                <h3>WHDR Assistant</h3>
            </div>
        </div>
        <div class="chat-body" id="chat-body">
            <div class="message bot-message appearing">
                Hello! I'm WHDR, your advanced AI assistant. I can help with text, code, images, and files. How can I
                assist you today?
            </div>
        </div>
        <div class="input-container">
            <input type="text" id="user-input" placeholder="Type your message..." autocomplete="off">
            <button class="tooltip file-upload-btn" id="file-upload-btn">
                ðŸ“Ž
                <span class="tooltiptext">Upload file/image</span>
            </button>
            <input type="file" id="file-input" accept=".txt,.pdf,.doc,.docx,.jpg,.jpeg,.png,.gif">
            <button id="send-btn">âž¤</button>
        </div>
    </div>


    <script>
        // Mobile menu toggle functionality
        const menuToggle = document.querySelector('.menu-toggle');
        const mainNav = document.getElementById('main-nav');

        menuToggle.addEventListener('click', () => {
            mainNav.classList.toggle('active');
        });

        // Close menu when clicking on a link (optional)
        document.querySelectorAll('nav a').forEach(link => {
            link.addEventListener('click', () => {
                if (window.innerWidth <= 768) {
                    mainNav.classList.remove('active');
                }
            });
        });

        // Close menu when resizing to desktop (optional)
        window.addEventListener('resize', () => {
            if (window.innerWidth > 768) {
                mainNav.classList.remove('active');
            }
        });


        const chatBody = document.getElementById('chat-body');
        const userInput = document.getElementById('user-input');
        const sendBtn = document.getElementById('send-btn');
        const fileUploadBtn = document.getElementById('file-upload-btn');
        const fileInput = document.getElementById('file-input');

        // API Configuration
        const API_KEY = "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";
        const API_URL = "https://openrouter.ai/api/v1/chat/completions";
        const MODEL = "deepseek/deepseek-chat:free";

        // Conversation history
        let conversationHistory = [
            {
                role: "system",
                content: "You are WHDR, a helpful AI assistant. Be friendly, concise, and helpful. You can generate and explain code, analyze images and documents, and provide detailed answers. When showing code, format it properly with syntax highlighting. For long responses, use bullet points or numbered lists for readability. Keep responses under 200 words unless more detail is specifically requested."
            }
        ];

        // Cache for faster responses
        let responseCache = {};
        let isWaitingForResponse = false;

        function addMessage(text, isUser = false, isFile = false, fileData = null) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message', isUser ? 'user-message' : 'bot-message', 'appearing');

            if (isFile && fileData) {
                if (fileData.type.startsWith('image/')) {
                    messageDiv.innerHTML = `
                        <div>${text}</div>
                        <img src="${fileData.url}" class="message-image" alt="Uploaded image">
                    `;
                } else {
                    messageDiv.innerHTML = `
                        <div>${text}</div>
                        <div class="file-preview">
                            <span class="file-icon">ðŸ“„</span>
                            <span>${fileData.name}</span>
                        </div>
                    `;
                }
            } else if (text.includes('```')) {
                // Format code in messages
                messageDiv.innerHTML = formatCodeInMessage(text);
            } else {
                messageDiv.textContent = text;
            }

            chatBody.appendChild(messageDiv);
            chatBody.scrollTop = chatBody.scrollHeight;

            // Remove appearing class after animation
            setTimeout(() => {
                messageDiv.classList.remove('appearing');
            }, 300);
        }

        function formatCodeInMessage(text) {
            // Simple code formatting for display
            const parts = text.split('```');
            let html = '';

            for (let i = 0; i < parts.length; i++) {
                if (i % 2 === 1) {
                    // Code part
                    html += `<div class="message-code">${parts[i]}</div>`;
                } else {
                    // Regular text part
                    html += parts[i];
                }
            }

            return html;
        }

        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.classList.add('message', 'bot-message', 'typing-indicator');
            typingDiv.id = 'typing-indicator';
            typingDiv.innerHTML = `
                <span class="typing-dot"></span>
                <span class="typing-dot"></span>
                <span class="typing-dot"></span>
            `;
            chatBody.appendChild(typingDiv);
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typing-indicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        async function getAIResponse(userMessage, fileContent = null) {
            if (isWaitingForResponse) return;
            isWaitingForResponse = true;

            // Check cache first
            const cacheKey = userMessage + (fileContent ? JSON.stringify(fileContent) : '');
            if (responseCache[cacheKey]) {
                hideTypingIndicator();
                addMessage(responseCache[cacheKey]);
                isWaitingForResponse = false;
                return;
            }

            // Add user message to history
            conversationHistory.push({
                role: "user",
                content: userMessage + (fileContent ? `\n[Attached file: ${fileContent.name}]` : '')
            });

            showTypingIndicator();
            sendBtn.disabled = true;

            try {
                const startTime = performance.now();

                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 10000); // 10 second timeout

                const response = await fetch(API_URL, {
                    method: "POST",
                    headers: {
                        "Authorization": `Bearer ${API_KEY}`,
                        "HTTP-Referer": window.location.href,
                        "X-Title": "WHDR AI Assistant",
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        model: MODEL,
                        messages: conversationHistory,
                        temperature: 0.7,
                        max_tokens: 1000
                    }),
                    signal: controller.signal
                });

                clearTimeout(timeoutId);

                if (!response.ok) {
                    throw new Error(`API request failed with status ${response.status}`);
                }

                const data = await response.json();
                const aiMessage = data.choices[0].message.content;

                // Add AI response to history
                conversationHistory.push({
                    role: "assistant",
                    content: aiMessage
                });

                // Cache the response
                responseCache[cacheKey] = aiMessage;

                hideTypingIndicator();
                addMessage(aiMessage);

                const endTime = performance.now();
                console.log(`Response time: ${((endTime - startTime) / 1000).toFixed(2)}s`);
            } catch (error) {
                hideTypingIndicator();
                console.error("Error fetching AI response:", error);
                addMessage("Sorry, I'm having trouble responding. Please try again with a shorter message.");
            } finally {
                sendBtn.disabled = false;
                isWaitingForResponse = false;
                userInput.focus();
            }
        }

        function handleUserInput() {
            const message = userInput.value.trim();
            if (message && !isWaitingForResponse) {
                addMessage(message, true);
                getAIResponse(message);
                userInput.value = '';
            }
        }

        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file || isWaitingForResponse) return;

            const reader = new FileReader();

            reader.onload = function (e) {
                let fileContent = '';
                let fileData = {
                    name: file.name,
                    type: file.type,
                    size: file.size,
                    url: ''
                };

                if (file.type.startsWith('image/')) {
                    fileData.url = e.target.result;
                    addMessage(`I've uploaded an image: ${file.name}`, true, true, fileData);
                    getAIResponse(`I've uploaded this image: ${file.name}. Please analyze it.`, fileData);
                } else {
                    if (file.type === 'application/pdf' ||
                        file.type === 'application/msword' ||
                        file.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') {
                        fileContent = `[PDF/DOC file: ${file.name}]`;
                    } else {
                        fileContent = e.target.result;
                        if (fileContent.length > 1000) {
                            fileContent = fileContent.substring(0, 1000) + '... [truncated]';
                        }
                    }

                    addMessage(`I've uploaded a file: ${file.name}`, true, true, fileData);
                    getAIResponse(`I've uploaded this file: ${file.name}. Content: ${fileContent}`, fileData);
                }
            };

            if (file.type.startsWith('image/')) {
                reader.readAsDataURL(file);
            } else {
                reader.readAsText(file);
            }

            // Reset file input
            event.target.value = '';
        }

        // Event Listeners
        sendBtn.addEventListener('click', handleUserInput);
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') handleUserInput();
        });

        fileUploadBtn.addEventListener('click', () => {
            fileInput.click();
        });

        fileInput.addEventListener('change', handleFileUpload);

        // Focus input on load
        userInput.focus();

        // Preload some common responses
        setTimeout(() => {
            responseCache["5 car brand give me"] = "Here are five popular car brands:\n\n1. Toyota\n2. Ford\n3. BMW\n4. Tesla\n5. Volkswagen\n\nNeed details about any specific brand?";
            responseCache["What can you do?"] = "I can:\nâ€¢ Answer questions\nâ€¢ Explain concepts\nâ€¢ Generate and debug code\nâ€¢ Analyze uploaded files/images\nâ€¢ Provide summaries\nâ€¢ And much more! What do you need help with?";
        }, 1000);







    </script>


</body>

</html>
